From 51de6202ec09a20451699e8e10bf3b8c88eb1e51 Mon Sep 17 00:00:00 2001
From: Rui Salvaterra <rsalvaterra@gmail.com>
Date: Mon, 22 Feb 2021 08:59:33 +0000
Subject: [PATCH] mvebu: remove 5.10 upstreamed device trees

At this point, they're either redundant or obsolete. Factor out common device
trees into the files directory.

Signed-off-by: Rui Salvaterra <rsalvaterra@gmail.com>
Tested-by: Tad <tad@spotco.us>
---
 .../boot/dts/armada-370-buffalo-ls421de.dts   | 433 ------------------
 .../arm/boot/dts/armada-385-linksys-venom.dts | 213 ---------
 .../dts/marvell/armada-3720-gl-mv1000.dts     | 162 -------
 .../marvell/armada-3720-espressobin-emmc.dts  |   0
 .../marvell/armada-3720-espressobin-ultra.dts |   0
 .../armada-3720-espressobin-v7-emmc.dts       |   0
 .../marvell/armada-3720-espressobin-v7.dts    |   0
 .../marvell/armada-3720-espressobin-emmc.dts  |  28 --
 .../marvell/armada-3720-espressobin-ultra.dts | 241 ----------
 .../armada-3720-espressobin-v7-emmc.dts       |  43 --
 .../marvell/armada-3720-espressobin-v7.dts    |  31 --
 11 files changed, 1151 deletions(-)
 delete mode 100644 target/linux/mvebu/files-5.10/arch/arm/boot/dts/armada-370-buffalo-ls421de.dts
 delete mode 100644 target/linux/mvebu/files-5.10/arch/arm/boot/dts/armada-385-linksys-venom.dts
 delete mode 100644 target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-gl-mv1000.dts
 rename target/linux/mvebu/{files-5.10 => files-5.4}/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts (100%)
 rename target/linux/mvebu/{files-5.10 => files-5.4}/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts (100%)
 rename target/linux/mvebu/{files-5.10 => files-5.4}/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts (100%)
 rename target/linux/mvebu/{files-5.10 => files-5.4}/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts (100%)
 delete mode 100644 target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts
 delete mode 100644 target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts
 delete mode 100644 target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts
 delete mode 100644 target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts

diff --git a/target/linux/mvebu/files-5.10/arch/arm/boot/dts/armada-370-buffalo-ls421de.dts b/target/linux/mvebu/files-5.10/arch/arm/boot/dts/armada-370-buffalo-ls421de.dts
deleted file mode 100644
index 57f1acf5f1..0000000000
--- a/target/linux/mvebu/files-5.10/arch/arm/boot/dts/armada-370-buffalo-ls421de.dts
+++ /dev/null
@@ -1,433 +0,0 @@
-// SPDX-License-Identifier: (GPL-2.0-or-later OR MIT)
-/*
- * Device Tree file for Buffalo LinkStation LS421DE
- *
- * Copyright (C) 2020 Daniel Gonz√°lez Cabanelas <dgcbueu@gmail.com>
- */
-
-/dts-v1/;
-
-#include "armada-370.dtsi"
-#include "mvebu-linkstation-fan.dtsi"
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include <dt-bindings/thermal/thermal.h>
-
-/ {
-	model = "Buffalo LinkStation LS421DE";
-	compatible = "buffalo,ls421de", "marvell,armada370", "marvell,armada-370-xp";
-
-	aliases {
-		led-boot = &led_boot;
-		led-failsafe = &led_failsafe;
-		led-running = &led_power;
-		led-upgrade = &led_upgrade;
-	};
-
-	chosen {
-		bootargs = "console=ttyS0,115200 earlyprintk noinitrd rootfstype=squashfs";
-		stdout-path = "serial0:115200n8";
-		append-rootblock = "nullparameter="; /* override the bootloader args */
-	};
-
-	memory {
-		device_type = "memory";
-		reg = <0x00000000 0x20000000>; /* 512 MB */
-	};
-
-	soc {
-		ranges = <MBUS_ID(0xf0, 0x01) 0 0xd0000000 0x100000
-			  MBUS_ID(0x01, 0xe0) 0 0xfff00000 0x100000
-			  MBUS_ID(0x09, 0x01) 0 0xf1100000 0x10000>;
-	};
-
-	system_fan: gpio_fan {
-		gpios = <&gpio0 13 GPIO_ACTIVE_HIGH
-			 &gpio0 14 GPIO_ACTIVE_HIGH>;
-		alarm-gpios = <&gpio0 10 GPIO_ACTIVE_HIGH>;
-
-		#cooling-cells = <2>;
-	};
-
-	thermal-zones {
-		hdd-thermal {
-			polling-delay = <20000>;
-			polling-delay-passive = <2000>;
-
-			thermal-sensors = <&hdd0_temp>; /* only one drivetemp sensor is supported */
-
-			trips {
-				hdd_alert1: trip1 {
-					temperature = <36000>;
-					hysteresis = <2000>;
-					type = "active";
-				};
-				hdd_alert2: trip2 {
-					temperature = <44000>;
-					hysteresis = <2000>;
-					type = "active";
-				};
-				hdd_alert3: trip3 {
-					temperature = <52000>;
-					hysteresis = <2000>;
-					type = "passive";
-				};
-				hdd_crit: trip4 {
-					temperature = <60000>;
-					hysteresis = <2000>;
-					type = "critical";
-				};
-			};
-
-			cooling-maps {
-				map1 {
-					trip = <&hdd_alert1>;
-					cooling-device = <&system_fan THERMAL_NO_LIMIT 1>;
-				};
-				map2 {
-					trip = <&hdd_alert2>;
-					cooling-device = <&system_fan 2 2>;
-				};
-				map3 {
-					trip = <&hdd_alert3>;
-					cooling-device = <&system_fan 3 THERMAL_NO_LIMIT>;
-				};
-			};
-		};
-
-		ethphy-thermal {
-			polling-delay = <20000>;
-			polling-delay-passive = <2000>;
-
-			thermal-sensors = <&ethphy0>;
-
-			trips {
-				ethphy_alert1: trip1 {
-					temperature = <65000>;
-					hysteresis = <4000>;
-					type = "passive";
-				};
-
-				ethphy_crit: trip2 {
-					temperature = <100000>;
-					hysteresis = <2000>;
-					type = "critical";
-				};
-			};
-
-			cooling-maps {
-				map1 {
-					trip = <&ethphy_alert1>;
-					cooling-device = <&system_fan THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
-				};
-
-			};
-		};
-	};
-
-	gpio_keys {
-		compatible = "gpio-keys";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		pinctrl-0 = <&pmx_buttons>;
-		pinctrl-names = "default";
-
-		power {
-			label = "Power Switch";
-			linux,code = <KEY_POWER>;
-			linux,input-type = <EV_SW>;
-			gpios = <&gpio0 15 GPIO_ACTIVE_LOW>;
-		};
-
-		function {
-			label = "Function Button";
-			linux,code = <KEY_CONFIG>;
-			gpios = <&gpio0 16 GPIO_ACTIVE_LOW>;
-		};
-	};
-
-	gpio_leds {
-		compatible = "gpio-leds";
-		pinctrl-names = "default";
-		pinctrl-0 = <&pmx_leds1 &pmx_leds2>;
-
-		system_red {
-			label = "ls421de:red:system";
-			gpios = <&gpio0 7 GPIO_ACTIVE_HIGH>;
-		};
-
-		led_power: power_white {
-			label = "ls421de:white:power";
-			gpios = <&gpio1 22 GPIO_ACTIVE_HIGH>;
-			default-state = "on";
-		};
-
-		led_failsafe: power_red {
-			label = "ls421de:red:power";
-			gpios = <&gpio1 23 GPIO_ACTIVE_HIGH>;
-		};
-
-		led_upgrade: power_orange {
-			label = "ls421de:orange:power";
-			gpios = <&gpio1 25 GPIO_ACTIVE_HIGH>;
-		};
-
-		led_boot: system_white {
-			label = "ls421de:white:system";
-			gpios = <&gpio1 27 GPIO_ACTIVE_HIGH>;
-		};
-
-		hdd1_red {
-			label = "ls421de:red:hdd1";
-			gpios = <&gpio1 29 GPIO_ACTIVE_HIGH>;
-			linux,default-trigger = "ata1";
-		};
-
-		hdd2_red {
-			label = "ls421de:red:hdd2";
-			gpios = <&gpio1 30 GPIO_ACTIVE_HIGH>;
-			linux,default-trigger = "ata2";
-		};
-	};
-
-	regulators {
-		compatible = "simple-bus";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		pinctrl-0 = <&pmx_power_usb &pmx_power_hdd1 &pmx_power_hdd2>;
-		pinctrl-names = "default";
-
-		usb_power: regulator@0 {
-			compatible = "regulator-fixed";
-			reg = <0>;
-			regulator-name = "USB";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			enable-active-high;
-			regulator-always-on;
-			regulator-boot-on;
-			gpio = <&gpio0 5 GPIO_ACTIVE_HIGH>;
-		};
-
-		sata1_power: regulator@1 {
-			compatible = "regulator-fixed";
-			reg = <1>;
-			regulator-name = "HDD1";
-			regulator-min-microvolt = <12000000>;
-			regulator-max-microvolt = <12000000>;
-			startup-delay-us = <2000000>;
-			enable-active-high;
-			regulator-always-on;
-			regulator-boot-on;
-			gpio = <&gpio0 8 GPIO_ACTIVE_HIGH>;
-		};
-
-		sata2_power: regulator@2 {
-			compatible = "regulator-fixed";
-			reg = <2>;
-			regulator-name = "HDD2";
-			regulator-min-microvolt = <12000000>;
-			regulator-max-microvolt = <12000000>;
-			startup-delay-us = <4000000>;
-			enable-active-high;
-			regulator-always-on;
-			regulator-boot-on;
-			gpio = <&gpio0 9 GPIO_ACTIVE_HIGH>;
-		};
-	};
-};
-
-&coherencyfab {
-	broken-idle;
-};
-
-&eth1 {
-	pinctrl-0 = <&ge1_rgmii_pins>;
-	pinctrl-names = "default";
-	status = "okay";
-	phy-handle = <&ethphy0>;
-	phy-connection-type = "rgmii-id";
-};
-
-&i2c0 {
-	pinctrl-0 = <&i2c0_pins>;
-	pinctrl-names = "default";
-	clock-frequency = <100000>;
-	status = "okay";
-
-	rs5c372a: rs5c372a@32 {
-		compatible = "ricoh,rs5c372a";
-		reg = <0x32>;
-		wakeup-source;
-	};
-};
-
-&mdio {
-	pinctrl-0 = <&mdio_pins>;
-	pinctrl-names = "default";
-
-	ethphy0: ethernet-phy@0 { /* Marvell 88E1518 */
-		reg = <0>;
-		marvell,reg-init = <0x3 0x10 0x1 0x1991>, /* LED function */
-				   <0x3 0x11 0x1 0x4401>, /* LED polarity */
-				   <0x3 0x12 0x1 0x4905>; /* LED timer */
-		#thermal-sensor-cells = <0>;
-	};
-};
-
-&pciec {
-	status = "okay";
-	/* Connected to uPD720202 USB 3.0 Host */
-	pcie@1,0 {
-		status = "okay";
-	};
-};
-
-&pmsu {
-	pinctrl-0 = <&pmx_power_cpu>;
-	pinctrl-names = "default";
-};
-
-&rtc {
-	status = "disabled";
-};
-
-&sata {
-	nr-ports = <2>;
-	status = "okay";
-	#address-cells = <1>;
-	#size-cells = <0>;
-
-	hdd0_temp: sata-port@0 {
-		reg = <0>;
-		#thermal-sensor-cells = <0>;
-	};
-
-	hdd1_temp: sata-port@1 {
-		reg = <1>;
-		#thermal-sensor-cells = <0>;
-	};
-};
-
-&sdio {
-	pinctrl-0 = <&sdio_pins2>;
-	pinctrl-names = "default";
-	status = "okay";
-	/* No CD or WP GPIOs */
-	broken-cd;
-};
-
-&uart0 {
-	status = "okay";
-};
-
-&usb0 {
-	status = "okay";
-};
-
-&nand_controller {
-	status = "okay";
-
-	nand@0 {
-		reg = <0>;
-		label = "pxa3xx_nand-0";
-		nand-rb = <0>;
-		marvell,nand-keep-config;
-		nand-on-flash-bbt;
-		nand-ecc-strength = <4>;
-		nand-ecc-step-size = <512>;
-
-		partitions {
-			compatible = "fixed-partitions";
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			partition@0 {
-				label = "kernel";
-				reg = <0x00000000 0x02000000>;  /* 32 MiB */
-			};
-
-			partition@2000000 {
-				label = "ubi";
-				reg = <0x02000000 0x1e000000>;  /* 480 MiB */
-			};
-		};
-	};
-};
-
-&spi0 {
-	status = "okay";
-	pinctrl-0 = <&spi0_pins2>;
-	pinctrl-names = "default";
-
-	spi-flash@0 {
-		#address-cells = <1>;
-		#size-cells = <1>;
-		compatible = "mxicy,mx25l8005", "jedec,spi-nor";
-		reg = <0>; /* Chip select 0 */
-		spi-max-frequency = <50000000>;
-
-		partitions {
-			compatible = "fixed-partitions";
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			partition@0 {
-				reg = <0x00000 0xf0000>; /* 960 KiB*/
-				label = "u-boot";
-				read-only;
-			};
-			partition@f0000 {
-				reg = <0xf0000 0x10000>; /* 64 KiB */
-				label = "u-boot-env";
-			};
-		};
-	};
-};
-
-&pinctrl {
-	pmx_power_cpu: pmx-power-cpu {
-		marvell,pins = "mpp4";
-		marvell,function = "vdd";
-	};
-	pmx_power_usb: pmx-power-usb {
-		marvell,pins = "mpp5";
-		marvell,function = "gpo";
-	};
-	pmx_power_hdd1: pmx-power-hdd1 {
-		marvell,pins = "mpp8";
-		marvell,function = "gpio";
-	};
-	pmx_power_hdd2: pmx-power-hdd2 {
-		marvell,pins = "mpp9";
-		marvell,function = "gpo";
-	};
-	pmx_fan_lock: pmx-fan-lock {
-		marvell,pins = "mpp10";
-		marvell,function = "gpio";
-	};
-	pmx_hdd_present: pmx-hdd-present {
-		marvell,pins = "mpp11", "mpp12";
-		marvell,function = "gpio";
-	};
-	pmx_fan_high: pmx-fan-high {
-		marvell,pins = "mpp13";
-		marvell,function = "gpio";
-	};
-	pmx_fan_low: pmx-fan-low {
-		marvell,pins = "mpp14";
-		marvell,function = "gpio";
-	};
-	pmx_buttons: pmx-buttons {
-		marvell,pins = "mpp15", "mpp16";
-		marvell,function = "gpio";
-	};
-	pmx_leds1: pmx-leds {
-		marvell,pins = "mpp7", "mpp54", "mpp59", "mpp61";
-		marvell,function = "gpo";
-	};
-	pmx_leds2: pmx-leds {
-		marvell,pins = "mpp55", "mpp57", "mpp62";
-		marvell,function = "gpio";
-	};
-};
diff --git a/target/linux/mvebu/files-5.10/arch/arm/boot/dts/armada-385-linksys-venom.dts b/target/linux/mvebu/files-5.10/arch/arm/boot/dts/armada-385-linksys-venom.dts
deleted file mode 100644
index de81600a80..0000000000
--- a/target/linux/mvebu/files-5.10/arch/arm/boot/dts/armada-385-linksys-venom.dts
+++ /dev/null
@@ -1,213 +0,0 @@
-/*
- * Device Tree file for the Linksys WRT32X (Venom)
- *
- * Copyright (C) 2017 Imre Kaloz <kaloz@openwrt.org>
- *
- *
- * This file is dual-licensed: you can use it either under the terms
- * of the GPL or the X11 license, at your option. Note that this dual
- * licensing only applies to this file, and not this project as a
- * whole.
- *
- *  a) This file is licensed under the terms of the GNU General Public
- *     License version 2.  This program is licensed "as is" without
- *     any warranty of any kind, whether express or implied.
- *
- * Or, alternatively,
- *
- *  b) Permission is hereby granted, free of charge, to any person
- *     obtaining a copy of this software and associated documentation
- *     files (the "Software"), to deal in the Software without
- *     restriction, including without limitation the rights to use,
- *     copy, modify, merge, publish, distribute, sublicense, and/or
- *     sell copies of the Software, and to permit persons to whom the
- *     Software is furnished to do so, subject to the following
- *     conditions:
- *
- *     The above copyright notice and this permission notice shall be
- *     included in all copies or substantial portions of the Software.
- *
- *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
- *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- *     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- *     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
- *     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- *     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- *     OTHER DEALINGS IN THE SOFTWARE.
- */
-
-/dts-v1/;
-#include <dt-bindings/gpio/gpio.h>
-#include <dt-bindings/input/input.h>
-#include "armada-385-linksys.dtsi"
-
-/ {
-	model = "Linksys WRT32X";
-	compatible = "linksys,wrt32x", "linksys,venom", "linksys,armada385",
-		     "marvell,armada385", "marvell,armada380";
-
-	chosen {
-		bootargs = "console=ttyS0,115200";
-		stdout-path = "serial0:115200n8";
-		append-rootblock = "root=/dev/mtdblock";
-	};
-};
-
-&expander0 {
-	wan_amber@0 {
-		label = "venom:amber:wan";
-		reg = <0x0>;
-	};
-
-	wan_blue@1 {
-		label = "venom:blue:wan";
-		reg = <0x1>;
-	};
-
-	usb2@5 {
-		label = "venom:blue:usb2";
-		reg = <0x5>;
-	};
-
-	usb3_1@6 {
-		label = "venom:blue:usb3_1";
-		reg = <0x6>;
-	};
-
-	usb3_2@7 {
-		label = "venom:blue:usb3_2";
-		reg = <0x7>;
-	};
-
-	wps_blue@8 {
-		label = "venom:blue:wps";
-		reg = <0x8>;
-	};
-
-	wps_amber@9 {
-		label = "venom:amber:wps";
-		reg = <0x9>;
-	};
-};
-
-&gpio_leds {
-	power {
-		gpios = <&gpio1 24 GPIO_ACTIVE_HIGH>;
-		label = "venom:blue:power";
-	};
-
-	sata {
-		gpios = <&gpio1 21 GPIO_ACTIVE_LOW>;
-		label = "venom:blue:sata";
-	};
-
-	wlan_2g {
-		gpios = <&gpio1 13 GPIO_ACTIVE_LOW>;
-		label = "venom:blue:wlan_2g";
-	};
-
-	wlan_5g {
-		gpios = <&gpio1 14 GPIO_ACTIVE_LOW>;
-		label = "venom:blue:wlan_5g";
-	};
-};
-
-&gpio_leds_pins {
-	marvell,pins = "mpp21", "mpp45", "mpp46", "mpp56";
-};
-
-&nand {
-	/* Spansion S34ML02G2 256MiB, OEM Layout */
-	partitions {
-		compatible = "fixed-partitions";
-		#address-cells = <1>;
-		#size-cells = <1>;
-
-		partition@0 {
-			label = "u-boot";
-			reg = <0x0000000 0x200000>;	/* 2MB */
-			read-only;
-		};
-
-		partition@200000 {
-			label = "u_env";
-			reg = <0x200000 0x20000>;	/* 128KB */
-		};
-
-		partition@220000 {
-			label = "s_env";
-			reg = <0x220000 0x40000>;	/* 256KB */
-		};
-
-		partition@180000 {
-			label = "unused_area";
-			reg = <0x260000 0x5c0000>;	/* 5.75MB */
-		};
-
-		partition@7e0000 {
-			label = "devinfo";
-			reg = <0x7e0000 0x40000>;	/* 256KB */
-			read-only;
-		};
-
-		/* kernel1 overlaps with rootfs1 by design */
-		partition@900000 {
-			label = "kernel1";
-			reg = <0x900000 0x7b00000>;	/* 123MB */
-		};
-
-		partition@c00000 {
-			label = "rootfs1";
-			reg = <0xc00000 0x7800000>;	/* 120MB */
-		};
-
-		/* kernel2 overlaps with rootfs2 by design */
-		partition@8400000 {
-			label = "kernel2";
-			reg = <0x8400000 0x7b00000>;	/* 123MB */
-		};
-
-		partition@8700000 {
-			label = "rootfs2";
-			reg = <0x8700000 0x7800000>;	/* 120MB */
-		};
-
-		/* last MB is for the BBT, not writable */
-		partition@ff00000 {
-			label = "BBT";
-			reg = <0xff00000 0x100000>;
-		};
-	};
-};
-
-
-&pcie1 {
-	mwlwifi {
-		marvell,chainmask = <4 4>;
-	};
-};
-
-&pcie2 {
-	mwlwifi {
-		marvell,chainmask = <4 4>;
-	};
-};
-
-&sdhci {
-	pinctrl-names = "default";
-	pinctrl-0 = <&sdhci_pins>;
-	no-1-8-v;
-	non-removable;
-	wp-inverted;
-	bus-width = <8>;
-	status = "okay";
-};
-
-&usb3_1_vbus {
-	gpio = <&gpio1 12 GPIO_ACTIVE_HIGH>;
-};
-
-&usb3_1_vbus_pins {
-	marvell,pins = "mpp44";
-};
diff --git a/target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-gl-mv1000.dts b/target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-gl-mv1000.dts
deleted file mode 100644
index 86c33fa100..0000000000
--- a/target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-gl-mv1000.dts
+++ /dev/null
@@ -1,162 +0,0 @@
-// SPDX-License-Identifier: (GPL-2.0-or-later OR MIT)
-
-/dts-v1/;
-#include <dt-bindings/gpio/gpio.h>
-#include "armada-372x.dtsi"
-
-/ {
-	model = "GL.iNet GL-MV1000";
-	compatible = "glinet,gl-mv1000", "marvell,armada3720";
-
-	chosen {
-		stdout-path = "serial0:115200n8";
-	};
-
-	memory@0 {
-		device_type = "memory";
-		reg = <0x00000000 0x00000000 0x00000000 0x20000000>;
-	};
-
-	vcc_sd_reg1: regulator {
-		compatible = "regulator-gpio";
-		regulator-name = "vcc_sd1";
-		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <3300000>;
-		regulator-boot-on;
-        
-		gpios-states = <0>;
-		states = <1800000 0x1
-			3300000 0x0>;
-		enable-active-high;
-	};
-};
-
-&spi0 {
-	status = "okay";
-
-	flash@0 {
-		reg = <0>;
-		compatible = "jedec,spi-nor";
-		spi-max-frequency = <104000000>;
-		m25p,fast-read;
-		partitions {
-			compatible = "fixed-partitions";
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			partition@0 {
-				label = "u-boot";
-				reg = <0 0xf0000>;
-			};
-
-			partition@f0000 {
-				label = "u-boot-env";
-				reg = <0Xf0000 0x8000>;
-			};
-
-			factory: partition@f8000 {
-				label = "factory";
-				reg = <0xf8000 0x8000>;
-			};
-		};
-	};
-};
-
-&sdhci1 {
-	wp-inverted;
-	bus-width = <4>;
-	cd-gpios = <&gpionb 17 GPIO_ACTIVE_LOW>;
-	marvell,pad-type = "sd";
-	no-1-8-v;
-	vqmmc-supply = <&vcc_sd_reg1>;
-	status = "okay";
-};
-
-&sdhci0 {
-	bus-width = <8>;
-	mmc-ddr-1_8v;
-	mmc-hs400-1_8v;
-	non-removable;
-	no-sd;
-	no-sdio;
-	marvell,pad-type = "fixed-1-8v";
-	status = "okay";
-};
-
-&usb3 {
-	status = "okay";
-};
-
-&usb2 {
-	status = "okay";
-};
-
-&uart0 {
-	status = "okay";
-};
-
-&mdio {
-	switch0: switch0@1 {
-		compatible = "marvell,mv88e6085";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		reg = <1>;
-
-		dsa,member = <0 0>;
-
-		ports: ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-				label = "cpu";
-				ethernet = <&eth0>;
-			};
-
-			port@1 {
-				reg = <1>;
-				label = "wan";
-				phy-handle = <&switch0phy0>;
-			};
-
-			port@2 {
-				reg = <2>;
-				label = "lan0";
-				phy-handle = <&switch0phy1>;
-			};
-
-			port@3 {
-				reg = <3>;
-				label = "lan1";
-				phy-handle = <&switch0phy2>;
-			};
-		};
-
-		mdio {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			switch0phy0: switch0phy0@11 {
-				reg = <0x11>;
-			};
-			switch0phy1: switch0phy1@12 {
-				reg = <0x12>;
-			};
-			switch0phy2: switch0phy2@13 {
-				reg = <0x13>;
-			};
-		};
-	};
-};
-
-&eth0 {
-	mtd-mac-address = <&factory 0x0>;
-	phy-mode = "rgmii-id";
-	status = "okay";
-
-	fixed-link {
-		speed = <1000>;
-		full-duplex;
-	};
-};
diff --git a/target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts b/target/linux/mvebu/files-5.4/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts
similarity index 100%
rename from target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts
rename to target/linux/mvebu/files-5.4/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts
diff --git a/target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts b/target/linux/mvebu/files-5.4/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts
similarity index 100%
rename from target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts
rename to target/linux/mvebu/files-5.4/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts
diff --git a/target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts b/target/linux/mvebu/files-5.4/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts
similarity index 100%
rename from target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts
rename to target/linux/mvebu/files-5.4/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts
diff --git a/target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts b/target/linux/mvebu/files-5.4/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts
similarity index 100%
rename from target/linux/mvebu/files-5.10/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts
rename to target/linux/mvebu/files-5.4/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts
diff --git a/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts b/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts
deleted file mode 100644
index e3bed4d445..0000000000
--- a/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-emmc.dts
+++ /dev/null
@@ -1,28 +0,0 @@
-// SPDX-License-Identifier: (GPL-2.0-or-later OR MIT)
-/*
- * Device Tree file for Globalscale Marvell ESPRESSOBin Board with eMMC
- * Copyright (C) 2018 Marvell
- *
- * Romain Perier <romain.perier@free-electrons.com>
- * Konstantin Porotchkin <kostap@marvell.com>
- *
- */
-
-#include "armada-3720-espressobin.dts"
-
-/ {
-	model = "Globalscale Marvell ESPRESSOBin Board (eMMC)";
-	compatible = "globalscale,espressobin-emmc", "globalscale,espressobin",
-		     "marvell,armada3720", "marvell,armada3710";
-};
-
-&sdhci0 {
-	status = "okay";
-
-	#address-cells = <1>;
-	#size-cells = <0>;
-	mmccard: mmccard@0 {
-		compatible = "mmc-card";
-		reg = <0>;
-	};
-};
diff --git a/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts b/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts
deleted file mode 100644
index 669b67e5a9..0000000000
--- a/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-ultra.dts
+++ /dev/null
@@ -1,241 +0,0 @@
-// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
-/*
- * Device Tree file for ESPRESSObin-Ultra
- * Copyright (C) 2019 Globalscale technologies, Inc.
- *
- * Jason Hung <jhung@globalscaletechnologies.com>
- */
-
-/dts-v1/;
-
-#include <dt-bindings/gpio/gpio.h>
-#include "armada-372x.dtsi"
-
-/ {
-	model = "Globalscale Marvell ESPRESSOBin Ultra Board";
-	compatible = "globalscale,espressobin-ultra", "marvell,armada3720",
-		     "marvell,armada3710";
-
-	aliases {
-		/* for dsa slave device */
-		ethernet1 = &switch0port1;
-		ethernet2 = &switch0port2;
-		ethernet3 = &switch0port3;
-		ethernet4 = &switch0port4;
-		ethernet5 = &switch0port5;
-	};
-
-	chosen {
-		stdout-path = "serial0:115200n8";
-	};
-
-	memory@0 {
-		device_type = "memory";
-		reg = <0x00000000 0x00000000 0x00000000 0x20000000>;
-	};
-
-	reg_usb3_vbus: usb3-vbus {
-		compatible = "regulator-fixed";
-		regulator-name = "usb3-vbus";
-		regulator-min-microvolt = <5000000>;
-		regulator-max-microvolt = <5000000>;
-		enable-active-high;
-		gpio = <&gpionb 19 GPIO_ACTIVE_HIGH>;
-	};
-
-	usb3_phy: usb3-phy {
-		compatible = "usb-nop-xceiv";
-		vcc-supply = <&reg_usb3_vbus>;
-	};
-
-	leds {
-		pinctrl-names = "default";
-		compatible = "gpio-leds";
-		/* No assigned functions to the LEDs by default */
-		led1 {
-			label = "ebin-ultra:blue:led1";
-			gpios = <&gpionb 11 GPIO_ACTIVE_LOW>;
-		};
-		led2 {
-			label = "ebin-ultra:green:led2";
-			gpios = <&gpionb 12 GPIO_ACTIVE_LOW>;
-		};
-		led3 {
-			label = "ebin-ultra:red:led3";
-			gpios = <&gpionb 13 GPIO_ACTIVE_LOW>;
-		};
-		led4 {
-			label = "ebin-ultra:yellow:led4";
-			gpios = <&gpionb 14 GPIO_ACTIVE_LOW>;
-		};
-	};
-};
-
-&pcie0 {
-	status = "okay";
-};
-
-&sata {
-	status = "okay";
-};
-
-&sdhci0 {
-	status = "okay";
-	non-removable;
-	bus-width = <8>;
-	mmc-ddr-1_8v;
-	mmc-hs400-1_8v;
-	marvell,pad-type = "fixed-1-8v";
-};
-
-&spi0 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&spi_quad_pins>;
-
-	flash@0 {
-		compatible = "jedec,spi-nor";
-		reg = <0>;
-		spi-max-frequency = <108000000>;
-		spi-rx-bus-width = <4>;
-		spi-tx-bus-width = <4>;
-		m25p,fast-read;
-
-		partitions {
-			compatible = "fixed-partitions";
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			partition@0 {
-				label = "firmware";
-				reg = <0x0 0x3e0000>;
-			};
-			partition@3e0000 {
-				label = "hw-info";
-				reg = <0x3e0000 0x10000>;
-				read-only;
-			};
-			partition@3f0000 {
-				label = "u-boot-env";
-				reg = <0x3f0000 0x10000>;
-			};
-		};
-	};
-};
-
-&uart0 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&uart1_pins>;
-};
-
-&i2c0 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&i2c1_pins>;
-
-	clock-frequency = <100000>;
-
-	rtc@51 {
-		compatible = "nxp,pcf8563";
-		reg = <0x51>;
-	};
-};
-
-&usb3 {
-	status = "okay";
-	usb-phy = <&usb3_phy>;
-};
-
-&usb2 {
-	status = "okay";
-};
-
-&eth0 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&rgmii_pins>;
-	phy-mode = "rgmii-id";
-
-	fixed-link {
-		speed = <1000>;
-		full-duplex;
-	};
-};
-
-&mdio {
-	status = "okay";
-
-	extphy: ethernet-phy@0 {
-		reg = <1>;
-	};
-
-	switch0: switch0@1 {
-		compatible = "marvell,mv88e6085";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		reg = <3>;
-
-		dsa,member = <0 0>;
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			switch0port0: port@0 {
-				reg = <0>;
-				label = "cpu";
-				ethernet = <&eth0>;
-			};
-
-			switch0port1: port@1 {
-				reg = <1>;
-				label = "lan0";
-				phy-handle = <&switch0phy1>;
-			};
-
-			switch0port2: port@2 {
-				reg = <2>;
-				label = "lan1";
-				phy-handle = <&switch0phy2>;
-			};
-
-			switch0port3: port@3 {
-				reg = <3>;
-				label = "lan2";
-				phy-handle = <&switch0phy3>;
-			};
-
-			switch0port4: port@4 {
-				reg = <4>;
-				label = "lan3";
-				phy-handle = <&switch0phy4>;
-			};
-
-			switch0port5: port@5 {
-				reg = <5>;
-				label = "wan";
-				phy-handle = <&extphy>;
-				phy-mode = "sgmii";
-			};
-		};
-
-		mdio {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			switch0phy1: switch0phy1@11 {
-				reg = <0x11>;
-			};
-			switch0phy2: switch0phy2@12 {
-				reg = <0x12>;
-			};
-			switch0phy3: switch0phy3@13 {
-				reg = <0x13>;
-			};
-			switch0phy4: switch0phy4@14 {
-				reg = <0x14>;
-			};
-		};
-	};
-};
diff --git a/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts b/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts
deleted file mode 100644
index e1e0071434..0000000000
--- a/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7-emmc.dts
+++ /dev/null
@@ -1,43 +0,0 @@
-// SPDX-License-Identifier: (GPL-2.0-or-later OR MIT)
-/*
- * Device Tree file for Globalscale Marvell ESPRESSOBin Board V7 with eMMC
- * Copyright (C) 2018 Marvell
- *
- * Romain Perier <romain.perier@free-electrons.com>
- * Konstantin Porotchkin <kostap@marvell.com>
- *
- */
-
-#include "armada-3720-espressobin.dts"
-
-/ {
-	model = "Globalscale Marvell ESPRESSOBin Board V7 (eMMC)";
-	compatible = "globalscale,espressobin-v7-emmc", "globalscale,espressobin-v7",
-		     "globalscale,espressobin", "marvell,armada3720",
-		     "marvell,armada3710";
-};
-
-&ports {
-	port@1 {
-		reg = <1>;
-		label = "lan1";
-		phy-handle = <&switch0phy0>;
-	};
-
-	port@3 {
-		reg = <3>;
-		label = "wan";
-		phy-handle = <&switch0phy2>;
-	};
-};
-
-&sdhci0 {
-	status = "okay";
-
-	#address-cells = <1>;
-	#size-cells = <0>;
-	mmccard: mmccard@0 {
-		compatible = "mmc-card";
-		reg = <0>;
-	};
-};
diff --git a/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts b/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts
deleted file mode 100644
index 40f18409bf..0000000000
--- a/target/linux/mvebu/files/arch/arm64/boot/dts/marvell/armada-3720-espressobin-v7.dts
+++ /dev/null
@@ -1,31 +0,0 @@
-// SPDX-License-Identifier: (GPL-2.0-or-later OR MIT)
-/*
- * Device Tree file for Globalscale Marvell ESPRESSOBin Board V7
- * Copyright (C) 2018 Marvell
- *
- * Romain Perier <romain.perier@free-electrons.com>
- * Konstantin Porotchkin <kostap@marvell.com>
- *
- */
-
-#include "armada-3720-espressobin.dts"
-
-/ {
-	model = "Globalscale Marvell ESPRESSOBin Board V7";
-	compatible = "globalscale,espressobin-v7", "globalscale,espressobin",
-		     "marvell,armada3720", "marvell,armada3710";
-};
-
-&ports {
-	port@1 {
-		reg = <1>;
-		label = "lan1";
-		phy-handle = <&switch0phy0>;
-	};
-
-	port@3 {
-		reg = <3>;
-		label = "wan";
-		phy-handle = <&switch0phy2>;
-	};
-};
-- 
2.29.2

